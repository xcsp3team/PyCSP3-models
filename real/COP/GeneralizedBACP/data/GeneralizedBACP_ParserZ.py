from pycsp3.problems.data.parsing import *

skip_empty_lines(or_prefixed_by="%")
data['nPeriods'] = number_in(line())
nCourses = number_in(next_line())
nCurricula = number_in(next_line())
data['minCourses'] = number_in(next_line())
data['maxCourses'] = number_in(next_line())
nPrecedences = number_in(next_line())
nUndesirables = number_in(next_line())
data['w1'] = number_in(next_line())
data['w2'] = number_in(next_line())
data['courseLoads'] = numbers_in(next_line())
assert nCourses == len(data['courseLoads'])
line = next_line()
data['curricula'] = decrement([sorted(numbers_in(tok)) for tok in line[line.index("{") + 1:line.rindex("}")].split("}, {")])
assert nCurricula == len(data['curricula'])
data['precedences'] = decrement(split_with_rows_of_size(numbers_in(next_line())[3:], 2))
assert nPrecedences == len(data['precedences'])
data['undesirables'] = decrement(split_with_rows_of_size(numbers_in(next_line())[3:], 2))
assert nUndesirables == len(data['undesirables'])
